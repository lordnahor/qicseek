<!DOCTYPE HTML PUBLIC "-//W3O//DTD W3 HTML 2.0//EN">
<!Converted with LaTeX2HTML 95.1 (Fri Jan 20 1995) by Nikos Drakos (nikos@cbl.leeds.ac.uk), CBLU, University of Leeds >
<HEAD>
<TITLE> I/O in External Predicates</TITLE>
</HEAD>
<BODY>
<meta name="description" value=" I/O in External Predicates">
<meta name="keywords" value="umsroot">
<meta name="resource-type" value="document">
<meta name="distribution" value="global">
<P>
 <BR> <HR><A NAME=tex2html5013 HREF="node231.html"><IMG ALIGN=BOTTOM ALT="next" SRC="http://www.ecrc.de/eclipse/new_icons//next_motif.gif"></A>   <A NAME=tex2html5011 HREF="node222.html"><IMG ALIGN=BOTTOM ALT="up" SRC="http://www.ecrc.de/eclipse/new_icons//up_motif.gif"></A>   <A NAME=tex2html5005 HREF="node229.html"><IMG ALIGN=BOTTOM ALT="previous" SRC="http://www.ecrc.de/eclipse/new_icons//previous_motif.gif"></A>      <A NAME=tex2html5015 HREF="node321.html"><IMG ALIGN=BOTTOM ALT="index" SRC="http://www.ecrc.de/eclipse/new_icons//index_motif.gif"></A>   <BR>
<B> Next:</B> <A NAME=tex2html5014 HREF="node231.html"> Arrays</A>
<B>Up:</B> <A NAME=tex2html5012 HREF="node222.html"> Interface to Externals</A>
<B> Previous:</B> <A NAME=tex2html5006 HREF="node229.html"> Strings</A>
<BR> <HR> <P>
<H2><A NAME=SECTION001948000000000000000> I/O in External Predicates</A></H2>
<P>
<A NAME=tex2html791 HREF="http://www.ecrc.de/eclipse/eclipse.html"><b> ECLiPSe</b></A>
  provides the user with the ability to perform i/o on
its predefined streams as well as on the dynamically opened ones.
<A NAME=tex2html792 HREF="http://www.ecrc.de/eclipse/eclipse.html"><b> ECLiPSe</b></A>
  stream identifiers which correspond to the predefined streams are
<DL ><DT>
<DD> <tt> Current_Input</tt>
<A NAME=3549>&#160;</A>
<P>
<DT>
<DD> <tt> Current_Output</tt>
<A NAME=3551>&#160;</A>
<P>
<DT>
<DD> <tt> Current_Error</tt>
<A NAME=3553>&#160;</A>
<P>
<DT>
<DD> <tt> Toplevel_Input</tt>
<A NAME=3555>&#160;</A>
<P>
<DT>
<DD> <tt> Toplevel_Output</tt>
<A NAME=3557>&#160;</A>
<P>
<DT>
<DD> <tt> Answer_Output</tt>
<A NAME=3559>&#160;</A>
<P>
<DT>
<DD> <tt> Debug_Input</tt>
<A NAME=3561>&#160;</A>
<P>
<DT>
<DD> <tt> Debug_Output</tt>
<A NAME=3563>&#160;</A>
<P>
 </DL>
These are C variables of type <tt> stream_id</tt>.
Other streams can be passed to the external predicates in the same way as
to builtins that accept stream specifications.
Such a stream specifications must then be converted into a C variable
of the type <tt> stream_id</tt> by using the macro
<blockquote> <PRE>p_example(sval, stag)
value sval;
type  stag;
{
    stream_id stream;
    Get_Stream(sval, stag, OUTPUT, stream)
    ...
}
</PRE>
</blockquote>
where the third parameter specifies if the stream must be open for INPUT
or OUTPUT.
<P>
There are two main functions to perform i/o on Prolog streams:
formated printing in the usual C way is done by
<blockquote> <PRE>Fprintf(stream, format, arg1, arg2, ...)
</PRE></blockquote>
<A NAME=3571>&#160;</A>
is similar to <tt> fprintf(3)</tt> in that its first argument
is a stream identifier, the second one is a string which specifies the format
in the style of <tt> printf(3)</tt> and the rest is a variable number
of arguments to be printed.
<P>
Prolog terms can be output with the function
<blockquote> <PRE>Write(val, tag, stream)
</PRE></blockquote>
<A NAME=3576>&#160;</A>
which outputs the term with tag <tt> tag</tt> and value <tt> val</tt> on
the specified Prolog stream.
For example
<blockquote> <PRE>Fprintf(Current_Output,
        &quot;tag = %d, value = %d\n&quot;, tag.kernel, val.nint);
Write(val, tag, Current_Output);
</PRE>
</blockquote>
are two ways how to print a Prolog integer number; the output
looks like
<blockquote> <PRE>tag = 5, value = 1
1
</PRE></blockquote>footnote
Be aware that you can not rely on a specific coding of a <A NAME=tex2html790 HREF="http://www.ecrc.de/eclipse/eclipse.html"><b> ECLiPSe</b></A>
  tag!
Similarly, the macro
<blockquote> <PRE>Writeq(val, tag, stream)
</PRE></blockquote>
<A NAME=3586>&#160;</A>
has the effect of <b> writeq/2</b>.
<P>
<BR> <HR><A NAME=tex2html5013 HREF="node231.html"><IMG ALIGN=BOTTOM ALT="next" SRC="http://www.ecrc.de/eclipse/new_icons//next_motif.gif"></A>   <A NAME=tex2html5011 HREF="node222.html"><IMG ALIGN=BOTTOM ALT="up" SRC="http://www.ecrc.de/eclipse/new_icons//up_motif.gif"></A>   <A NAME=tex2html5005 HREF="node229.html"><IMG ALIGN=BOTTOM ALT="previous" SRC="http://www.ecrc.de/eclipse/new_icons//previous_motif.gif"></A>      <A NAME=tex2html5015 HREF="node321.html"><IMG ALIGN=BOTTOM ALT="index" SRC="http://www.ecrc.de/eclipse/new_icons//index_motif.gif"></A>   <BR>
<B> Next:</B> <A NAME=tex2html5014 HREF="node231.html"> Arrays</A>
<B>Up:</B> <A NAME=tex2html5012 HREF="node222.html"> Interface to Externals</A>
<B> Previous:</B> <A NAME=tex2html5006 HREF="node229.html"> Strings</A>
<BR> <HR> <P>
<BR> <HR>
<P><ADDRESS>
<I>Micha Meier <BR>
Mon Mar  4 12:11:45 MET 1996</I>
</ADDRESS>
</BODY>

